<Window x:Class="AnarkBrowser.ScriptEditor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Anark Script Editor (COG)" Height="600" Width="1000"
        Background="#1E1E1E" Foreground="#DDD">

    <Window.Resources>
        <Style TargetType="ListBox">
            <Setter Property="Background" Value="#252526"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="#DDD"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" BorderBrush="#333" BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <TextBlock Text="Functions" FontWeight="Bold" Margin="10" Foreground="#00F3FF"/>
                <ListBox x:Name="FunctionList" Grid.Row="1" DisplayMemberPath="Name" SelectionChanged="FunctionList_SelectionChanged"/>
            </Grid>
        </Border>

        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <TextBlock Text="Decompiled View (Read-Only)" FontWeight="Bold" Margin="10" Foreground="#FEEB05"/>
            <TextBox x:Name="CodeView" Grid.Row="1" 
                     Background="#1E1E1E" Foreground="#CE9178" 
                     FontFamily="Consolas" FontSize="14" 
                     IsReadOnly="True" BorderThickness="0" 
                     Padding="10" 
                     VerticalScrollBarVisibility="Auto"/>
        </Grid>

        <Border Grid.Column="2" BorderBrush="#333" BorderThickness="1,0,0,0" Background="#252526">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Detected Variables" FontWeight="Bold" Margin="10" Foreground="#FF0099"/>

                <DataGrid x:Name="VarGrid" Grid.Row="1" AutoGenerateColumns="False" 
                          Background="Transparent" RowBackground="Transparent" 
                          HeadersVisibility="Column" GridLinesVisibility="Horizontal">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Offset" Binding="{Binding Offset, StringFormat=X}" IsReadOnly="True" Width="60"/>
                        <DataGridTextColumn Header="Type" Binding="{Binding TypeName}" IsReadOnly="True" Width="60"/>
                        <DataGridTextColumn Header="Value" Binding="{Binding Data}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>

                <Button Grid.Row="2" Content="Apply Changes (Memory)" Click="Save_Click" 
                        Margin="10" Padding="5" Background="#00F3FF" Foreground="Black" FontWeight="Bold"/>
            </Grid>
        </Border>
    </Grid>
</Window>